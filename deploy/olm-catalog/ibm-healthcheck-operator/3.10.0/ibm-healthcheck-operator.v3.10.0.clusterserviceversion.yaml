apiVersion: operators.coreos.com/v1alpha1
kind: ClusterServiceVersion
metadata:
  annotations:
    olm.skipRange: '>=3.5.0 <3.10.0'
    alm-examples: |-
      [
        {
          "apiVersion": "operator.ibm.com/v1alpha1",
          "kind": "HealthService",
          "metadata": {
            "labels": {
              "app.kubernetes.io/instance": "ibm-healthcheck-operator",
              "app.kubernetes.io/managed-by": "ibm-healthcheck-operator",
              "app.kubernetes.io/name": "ibm-healthcheck-operator"
            },
            "name": "system-healthcheck-service"
          },
          "spec": {
            "healthService": {
              "configmapName": "system-healthcheck-service-config",
              "name": "system-healthcheck-service",
              "replicas": 1,
              "resources": {
                "limits": {
                  "cpu": "500m",
                  "memory": "512Mi"
                },
                "requests": {
                  "cpu": "50m",
                  "memory": "64Mi"
                }
              },
              "serviceNameSetting": "Annotations:productName"
            },
            "memcached": {
              "command": [
                "memcached",
                "-m 64",
                "-o",
                "modern",
                "-v"
              ],
              "name": "icp-memcached",
              "replicas": 1,
              "resources": {
                "limits": {
                  "cpu": "500m",
                  "memory": "512Mi"
                },
                "requests": {
                  "cpu": "50m",
                  "memory": "64Mi"
                }
              }
            }
          }
        },
        {
          "apiVersion": "operator.ibm.com/v1alpha1",
          "kind": "MustGatherConfig",
          "metadata": {
            "labels": {
              "app.kubernetes.io/instance": "ibm-healthcheck-operator",
              "app.kubernetes.io/managed-by": "ibm-healthcheck-operator",
              "app.kubernetes.io/name": "ibm-healthcheck-operator"
            },
            "name": "must-gather-common-service-config"
          },
          "spec": {
            "gatherConfig": "modules=\"overview,failure,cloudpak\"\nnamespaces=\"common-service,ibm-common-services\"\nlabels=\"\""
          }
        },
        {
          "apiVersion": "operator.ibm.com/v1alpha1",
          "kind": "MustGatherConfig",
          "metadata": {
            "labels": {
              "app.kubernetes.io/instance": "ibm-healthcheck-operator",
              "app.kubernetes.io/managed-by": "ibm-healthcheck-operator",
              "app.kubernetes.io/name": "ibm-healthcheck-operator"
            },
            "name": "must-gather-default-config"
          },
          "spec": {
            "gatherConfig": "modules=\"overview,system,failure,ocp,cloudpak\"\nnamespaces=\"common-service,ibm-common-services\"\nlabels=\"\""
          }
        },
        {
          "apiVersion": "operator.ibm.com/v1alpha1",
          "kind": "MustGatherJob",
          "metadata": {
            "labels": {
              "app.kubernetes.io/instance": "ibm-healthcheck-operator",
              "app.kubernetes.io/managed-by": "ibm-healthcheck-operator",
              "app.kubernetes.io/name": "ibm-healthcheck-operator"
            },
            "name": "example-mustgatherjob"
          },
          "spec": {
            "mustgatherConfigName": "must-gather-common-service-config",
            "serviceAccountName": "ibm-mustgather-admin"
          }
        },
        {
          "apiVersion": "operator.ibm.com/v1alpha1",
          "kind": "MustGatherService",
          "metadata": {
            "labels": {
              "app.kubernetes.io/instance": "ibm-healthcheck-operator",
              "app.kubernetes.io/managed-by": "ibm-healthcheck-operator",
              "app.kubernetes.io/name": "ibm-healthcheck-operator"
            },
            "name": "must-gather-service"
          },
          "spec": {
            "mustGather": {
              "replicas": 1,
              "name": "must-gather-service",
              "resources": {
                "limits": {
                  "cpu": "500m",
                  "memory": "512Mi"
                },
                "requests": {
                  "cpu": "50m",
                  "memory": "64Mi"
                }
              }
            },
            "persistentVolumeClaim": {
              "name": "must-gather-pvc",
              "resources": {
                "requests": {
                  "storage": "5Gi"
                }
              },
              "storageClassName": ""
            }
          }
        }
      ]
    capabilities: Basic Install
    categories: Monitoring
    certified: "false"
    containerImage: quay.io/opencloudio/ibm-healthcheck-operator:latest
    createdAt: "2020-09-16"
    description: You can use the ibm-healthcheck-operator to install the IBM System Healthcheck service. You can use IBM System Healthcheck service to check the service status of the IBM Cloud Paks and IBM Cloud Platform Common Services.
    repository: https://github.com/IBM/ibm-healthcheck-operator
    support: IBM
  name: ibm-healthcheck-operator.v3.10.0
  namespace: placeholder
  labels:
    operatorframework.io/arch.amd64: supported
    operatorframework.io/arch.ppc64le: supported
    operatorframework.io/arch.s390x: supported
    operatorframework.io/os.linux: supported
spec:
  apiservicedefinitions: {}
  customresourcedefinitions:
    owned:
    - description: HealthService is the Schema for the healthservices API
      kind: HealthService
      name: healthservices.operator.ibm.com
      version: v1alpha1
      displayName: IBM Health Check Services
      resources:
      - kind: deployments
        name: A Kubernetes Deployment
        version: v1
      - kind: services
        name: A Kubernetes Service
        version: v1
      - kind: servicemonitors
        name: A Kubernetes Servicemonitor
        version: v1
      - kind: ingresses
        name: A Kubernetes Ingress
        version: v1beta1
      - kind: pods
        name: A Kubernetes Pod
        version: v1
      - kind: configmaps
        name: A Kubernetes Configmap
        version: v1
      - kind: healthservices
        name: healthservice operator
        version: v1alpha1
      - kind: replicasets
        name: A Kubernetes Replicaset
        version: v1
      specDescriptors:
      - description: HealthService defines the desired state of HealthService.HealthService
        displayName: Health Service
        path: healthService
      - description: Memcached defines the desired state of HealthService.Memcached
        displayName: Memcached
        path: memcached
      statusDescriptors:
      - description: HealthCheckNodes are the names of the Healch Service pods
        displayName: Healch Service Nodes
        path: healthCheckNodes
      - description: MemcachedNodes are the names of the memcached pods
        displayName: Memcached Nodes
        path: memcachedNodes
    - description: ClusterServiceStatus is the Schema for the clusterservicestatus API
      kind: ClusterServiceStatus
      name: clusterservicestatuses.clusterhealth.ibm.com
      version: v1
      displayName: IBM Health Services ClusterServiceStatus
    - description: MustGatherService is the Schema for the mustgatherservices API
      kind: MustGatherService
      name: mustgatherservices.operator.ibm.com
      version: v1alpha1
      displayName: IBM Must Gather Services
    - description: MustGatherJob is the Schema for the mustgatherjobs API
      kind: MustGatherJob
      name: mustgatherjobs.operator.ibm.com
      version: v1alpha1
      displayName: IBM Must Gather Jobs
    - description: MustGatherConfig is the Schema for the mustgatherconfigs API
      kind: MustGatherConfig
      name: mustgatherconfigs.operator.ibm.com
      version: v1alpha1
      displayName: IBM Must Gather Configs
  description: "**Important:** Do not install this operator directly. Only install this operator using the IBM Common Services Operator. For more information about installing this operator and other Common Services operators, see [Installer documentation](http://ibm.biz/cpcs_opinstall).\n\n If you are using this operator as part of an IBM Cloud Pak, see the documentation for that IBM Cloud Pak to learn more about how to install and use the operator service. For more information about IBM Cloud Paks, see [IBM Cloud Paks that use Common Services](http://ibm.biz/cpcs_cloudpaks).\n\nYou can use the ibm-healthcheck-operator to install the IBM System Healthcheck service. You can use IBM System Healthcheck service to check the service status of the IBM Cloud Paks and IBM Cloud Platform Common Services. \n\nFor more information about the available IBM Cloud Platform Common Services, see the [IBM Knowledge Center](http://ibm.biz/cpcsdocs). \n## Supported platforms \n\n Red Hat OpenShift Container Platform 4.3 or newer installed on one of the following platforms: \n\n- Linux x86_64 \n- Linux on Power (ppc64le) \n- Linux on IBM Z and LinuxONE \n## Prerequisites\n\n Before you install this operator, you need to first install the operator dependencies and prerequisites: \n- For the list of operator dependencies, see the IBM Knowledge Center [Common Services dependencies documentation](http://ibm.biz/cpcs_opdependencies). \n- For the list of prerequisites for installing the operator, see the IBM Knowledge Center [Preparing to install services documentation](http://ibm.biz/cpcs_opinstprereq). \n## Documentation \n\n To install the operator with the IBM Common Services Operator follow the the installation and configuration instructions within the IBM Knowledge Center. \n- If you are using the operator as part of an IBM Cloud Pak, see the documentation for that IBM Cloud Pak, for a list of IBM Cloud Paks, see [IBM Cloud Paks that use Common Services](http://ibm.biz/cpcs_cloudpaks). \n- If you are using the operator with an IBM Containerized Software, see the IBM Cloud Platform Common Services Knowledge Center [Installer documentation](http://ibm.biz/cpcs_opinstall)."
  displayName: IBM Health Check Operator
  icon:
  - base64data: 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
    mediatype: image/png
  install:
    spec:
      clusterPermissions:
      - rules:
        - apiGroups:
          - clusterhealth.ibm.com
          resources:
          - clusterservicestatuses
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - patch
          - delete
          - deletecollection
        - apiGroups:
          - ''
          resources:
          - pods
          - nodes
          verbs:
          - get
          - list
        serviceAccountName: ibm-healthcheck-operator-cluster
      - rules:
        - apiGroups:
          - '*'
          resources:
          - '*'
          verbs:
          - get
          - list
        - apiGroups:
          - ''
          resources:
          - pods/exec
          verbs:
          - create
        serviceAccountName: ibm-mustgather-admin
      deployments:
      - name: ibm-healthcheck-operator
        spec:
          replicas: 1
          selector:
            matchLabels:
              name: ibm-healthcheck-operator
          strategy: {}
          template:
            metadata:
              annotations:
                productID: 068a62892a1e4db39641342e592daa25
                productMetric: FREE
                productName: IBM Cloud Platform Common Services
              labels:
                app.kubernetes.io/instance: ibm-healthcheck-operator
                app.kubernetes.io/managed-by: ibm-healthcheck-operator
                app.kubernetes.io/name: ibm-healthcheck-operator
                name: ibm-healthcheck-operator
            spec:
              affinity:
                nodeAffinity:
                  requiredDuringSchedulingIgnoredDuringExecution:
                    nodeSelectorTerms:
                    - matchExpressions:
                      - key: beta.kubernetes.io/arch
                        operator: In
                        values:
                        - amd64
                        - ppc64le
                        - s390x
              containers:
              - command:
                - ibm-healthcheck-operator
                env:
                - name: WATCH_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.annotations['olm.targetNamespaces']
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
                - name: OPERATOR_NAME
                  value: ibm-healthcheck-operator
                - name: SYSTEM_HEALTHCHECK_SERVICE_IMAGE
                  value: "quay.io/opencloudio/system-healthcheck-service:3.9.0"
                - name: ICP_MEMCACHED_IMAGE
                  value: "quay.io/opencloudio/icp-memcached:3.9.0"
                - name: MUST_GATHER_IMAGE
                  value: "quay.io/opencloudio/must-gather:4.5.4"
                - name: MUST_GATHER_SERVICE_IMAGE
                  value: "quay.io/opencloudio/must-gather-service:1.2.1"
                image: quay.io/opencloudio/ibm-healthcheck-operator:latest
                imagePullPolicy: Always
                name: ibm-healthcheck-operator
                resources:
                  limits:
                    cpu: 160m
                    memory: 512Mi
                  requests:
                    cpu: 10m
                    memory: 32Mi
                securityContext:
                  allowPrivilegeEscalation: false
                  capabilities:
                    drop:
                    - ALL
                  privileged: false
                  readOnlyRootFilesystem: true
                  runAsNonRoot: true
              serviceAccountName: ibm-healthcheck-operator
      permissions:
      - rules:
        - apiGroups:
          - extensions
          resources:
          - ingresses
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - ""
          resources:
          - pods
          - services
          - services/finalizers
          - endpoints
          - persistentvolumeclaims
          - events
          - configmaps
          - secrets
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - apps
          resources:
          - deployments
          - daemonsets
          - replicasets
          - statefulsets
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - batch
          resources:
          - jobs
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - monitoring.coreos.com
          resources:
          - servicemonitors
          verbs:
          - get
          - create
        - apiGroups:
          - apps
          resourceNames:
          - ibm-healthcheck-operator
          resources:
          - deployments/finalizers
          verbs:
          - update
        - apiGroups:
          - ""
          resources:
          - pods
          verbs:
          - get
        - apiGroups:
          - apps
          resources:
          - replicasets
          - deployments
          verbs:
          - get
        - apiGroups:
          - operator.ibm.com
          resources:
          - '*'
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - clusterhealth.ibm.com
          resources:
          - '*'
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        serviceAccountName: ibm-healthcheck-operator
    strategy: deployment
  installModes:
  - supported: true
    type: OwnNamespace
  - supported: true
    type: SingleNamespace
  - supported: false
    type: MultiNamespace
  - supported: true
    type: AllNamespaces
  maturity: alpha
  provider:
    name: IBM
  replaces: ibm-healthcheck-operator.v3.9.1
  version: 3.10.0
  links:
  - name: IBM Health Check Operator
    url: https://github.com/IBM/ibm-healthcheck-operator
  maintainers:
  - email: support@ibm.com
    name: IBM Support
  keywords:
  - IBM
  - Cloud
  - Monitoring
  - Healthcheck
